{
  "path": "layers/events/auth-verified.toml",
  "name": "auth-verified.toml",
  "type": "toml",
  "content": {
    "event": {
      "id": "auth.verified",
      "name": "Phone Verified",
      "description": "User successfully verified phone with OTP",
      "category": "auth"
    },
    "trigger": {
      "action": "submit",
      "element": "OTP input field (auto-submit on 6 digits)"
    },
    "payload": [
      {
        "name": "phone",
        "type": "string",
        "description": "Verified phone number"
      },
      {
        "name": "app",
        "type": "string",
        "description": "Which app (client, specialist)"
      },
      {
        "name": "isNewUser",
        "type": "boolean",
        "description": "Whether this is a new registration"
      }
    ],
    "backend": {
      "description": "Validates OTP, creates session token, marks phone as verified, proceeds to profile or home"
    },
    "relations": {
      "entities": [
        "user"
      ],
      "routes": [
        "client-login",
        "specialist-login"
      ]
    }
  },
  "rawContent": "[event]\nid = \"auth.verified\"\nname = \"Phone Verified\"\ndescription = \"User successfully verified phone with OTP\"\ncategory = \"auth\"\n\n[trigger]\naction = \"submit\"\nelement = \"OTP input field (auto-submit on 6 digits)\"\n\n[[payload]]\nname = \"phone\"\ntype = \"string\"\ndescription = \"Verified phone number\"\n\n[[payload]]\nname = \"app\"\ntype = \"string\"\ndescription = \"Which app (client, specialist)\"\n\n[[payload]]\nname = \"isNewUser\"\ntype = \"boolean\"\ndescription = \"Whether this is a new registration\"\n\n[backend]\ndescription = \"Validates OTP, creates session token, marks phone as verified, proceeds to profile or home\"\n\n[relations]\nentities = [\"user\"]\nroutes = [\"client-login\", \"specialist-login\"]\n",
  "metadata": {
    "size": 680,
    "modified": "2025-12-14T15:39:09.525Z"
  }
}